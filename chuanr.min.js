/* http://github.com/normanzb/ */!function(){var a,b,c,d=new Function("return this")(),e=d.define||function(a){var b=a();"undefined"!=typeof module&&(module.exports=b)||(d.chuanr=b)};!function(d){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,b){return function(){return n.apply(d,v.call(arguments,0).concat([a,b]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var b=r[a];delete r[a],t[a]=!0,m.apply(d,b)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(a,b,c,f){var h,k,l,m,n,s,u=[],v=typeof c;if(f=f||a,"undefined"===v||"function"===v){for(b=!b.length&&c.length?["require","exports","module"]:b,n=0;n<b.length;n+=1)if(m=o(b[n],f),k=m.f,"require"===k)u[n]=p.require(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=c?c.apply(q[a],u):void 0,a&&(h&&h.exports!==d&&h.exports!==q[a]?q[a]=h.exports:l===d&&s||(q[a]=l))}else a&&(q[a]=c)},a=b=n=function(a,b,c,e,f){if("string"==typeof a)return p[a]?p[a](b):j(o(a,b).f);if(!a.splice){if(s=a,s.deps&&n(s.deps,s.callback),!b)return;b.splice?(a=b,b=c,c=null):a=d}return b=b||function(){},"function"==typeof c&&(c=e,e=f),e?m(d,a,b,c):setTimeout(function(){m(d,a,b,c)},4),n},n.config=function(a){return n(a)},a._defined=q,c=function(a,b,c){b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},c.amd={jQuery:!0}}(),c("../node_modules/almond/almond",function(){}),c("Formatter",[],function(){function a(){var a,b,c,d,e=!1,f=this._cache;console.log("input",f);for(var g=0;g<this.patterns.length;g++)if(a=this.patterns[g],b=a.match(f)){if(b.matched){c=b,d=a,e=!0;break}(null==c||b.counts.matched>c.counts.matched)&&(c=b,d=a)}return null!=d&&c?(console.log(d.toString(),c),this._current={pattern:d,result:c},c.result):null}function b(a){if(null==a||a.length>>>0<=0)throw c;this._cache="",this._current=null,this.patterns=a}var c="No pattern specified",d=b.prototype;return d.input=function(a){var b=this._cache,c={begin:a.caret.begin,end:a.caret.end},d="";a.caret.begin==a.caret.end&&(a.del?c.end+=1:a.back&&(c.begin-=1)),null!=a.char&&(d=String.fromCharCode(a.char)),b=b.substring(0,c.begin)+d+b.substring(c.end,b.length),this._cache=b},d.output=function(){return a.call(this)},b}),c("PatternFunction/digit",[],function(){var a=function(a,b){return(null==b||0==b)&&(b="0-9"),new RegExp("^["+b+"]$").test(a)};return a}),c("../lib/boe/src/boe/util",[],function(){var a=Function("return this")(),b=a.Object.prototype,c=a.Array.prototype,d=a.Function.prototype,e="function",f={mixinAsStatic:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=f.bind.call(d.call,b[c]));return a},type:function(a){var c=b.toString.call(a),d=c.indexOf("]");return c.substring(8,d)},mixin:function(a,b,c){null==b&&(b=a,a={});for(var d in b)b.hasOwnProperty(d)&&(a[d]=typeof c==e?c(d,b[d]):b[d]);return a},bind:function(a){var b=c.slice,d=this,e=b.call(arguments);return e.shift(),function f(){return this instanceof f&&(a=this),d.apply(a,e.concat(b.call(arguments)))}},slice:function(a){return c.slice.call(a)},g:a};return f}),c("../lib/boe/src/boe/Object/clone",["../util"],function(a){function b(h){var i;if(g in this)return this[g];f.push(this),i=typeof this==c?window.eval("true?("+e.toString.call(this)+"):false"):"Array"==a.type(this)?[]:{},this[g]=i;for(var j in this)if(0!=this.hasOwnProperty(j)&&j!=g){var k=this[j];i[j]=!h||typeof k!=d&&typeof k!=c?k:b.call(k,h)}if(f.pop()!=this)throw"boe.Object.shadow: stack corrupted.";return delete this[g],i}var c="function",d="object",e=a.g.Function.prototype,f=[],g="__boeObjectClone_Traversed";return b}),c("Pattern",["./PatternFunction/digit","../lib/boe/src/boe/Object/clone"],function(a,b){function c(a,b){return p+": "+a+":"+b}function d(a,b){return q+": "+a+":"+b}function e(a){if(a==i)return j;if(a==j)return i;if(a==k)return l;if(a==l)return k;throw new Error(r)}function f(a){for(var b,d,f=this,g=m,h=[],p=0;p<a.length;p++)if(b=a.charAt(p),g==m&&b==i)h.push({"char":b,mode:g}),g=n;else if(g==n&&b==j&&h[h.length-1].char==i)d=h.pop(),g=d.mode;else if(g==n&&b==k)h.push({"char":b,mode:g}),g=o;else if(g==o&&b==l&&h[h.length-1].char==k)d=h.pop(),g=d.mode;else if(g==m)f.items.push({type:g,value:b});else if(g==n)f.items.push({type:g,value:b,param:""});else{var q=f.items[f.items.length-1];if(q.type!=n)throw new Error(c("Expect a function pattern",p-1));q.param+=b}if(h.length>0)throw new Error(c("Expect a '"+e(h[h.length-1].char)+"'",p-1))}function g(b){return function(c){return a(c,b+"")}}function h(a){this.items=[],this.pattern=a,f.call(this,a)}var i="{",j="}",k="(",l=")",m=1,n=2,o=4,p="Syntax error",q="Runtime error",r="Not a tag.",s=h.prototype;s.match=function(a,c){var e,f,g,i,j,k,l=[],o="",p=!0,q=0;for(g=a.toString(),i=b.call(this.items,!0),e=0;e<i.length;e++)j=i[e],j.type==n&&l.push(j);if(g.length>l.length)return!1;for(f=c?l.length:g.length,q=f,e=0;f>e&&e<l.length;e++)if(j=l[e],char=g.charAt(e),j.type==n){if(k=h.functions[j.value],null==k)throw new Error(d('Function "'+j.value+'"" was not available.',e));if(k.call(null,char,j.param)===!1){p=!1,q=e+1;break}j.value=char,j.type=m}for(e=0;e<i.length;e++)j=i[e],o+=j.type==m?j.value:" ";return{result:o,matched:p,counts:{total:f,matched:q}}},s.toString=function(){return this.pattern},h.functions={d:a};for(var t=10;t--;)h.functions[t]=g(t);return h.parse=function(a){var b=new h(a);return b},h}),c("util",[],function(){var a={},b="undefined"!=typeof navigator?navigator.userAgent:null,c=/iphone/i.test(b);return a.extend=function(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])a[c]=arguments[b][c];return a},a.addChars=function(a,b,c){return a.substr(0,c)+b+a.substr(c,a.length)},a.removeChars=function(a,b,c){return a.substr(0,b)+a.substr(c,a.length)},a.isBetween=function(a,b){return b.sort(function(a,b){return a-b}),a>b[0]&&a<b[1]},a.addListener=function(a,b,c){return"undefined"!=typeof a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},a.preventDefault=function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1},a.getClip=function(a){return a.clipboardData?a.clipboardData.getData("Text"):window.clipboardData?window.clipboardData.getData("Text"):void 0},a.isDelKey=function(a){return 46===a||c&&127===a},a.isBackSpaceKey=function(a){return 8===a},a.isSpecialKey=function(a){var b={9:"tab",13:"enter",35:"end",36:"home",37:"leftarrow",38:"uparrow",39:"rightarrow",40:"downarrow",116:"F5"};return b[a]},a.isModifier=function(a){return a.ctrlKey||a.altKey||a.metaKey},a.isAcceptableKeyCode=function(b){return b>=48&&57>=b||b>=65&&90>=b||b>=96&&105>=b||a.isDelKey(b)||a.isBackSpaceKey(b)?!0:!1},a.isMovementKeyCode=function(a){return a>=37&&40>=a||9==a?!0:!1},a}),c("caret",["require"],function(){var a={};return a.get=function(a){if("number"==typeof a.selectionStart)return{begin:a.selectionStart,end:a.selectionEnd};var b=document.selection.createRange();if(b&&b.parentElement()==a){var c=a.createTextRange(),d=a.createTextRange(),e=a.value.length;return c.moveToBookmark(b.getBookmark()),d.collapse(!1),c.compareEndPoints("StartToEnd",d)>-1?{begin:e,end:e}:{begin:-c.moveStart("character",-e),end:-c.moveEnd("character",-e)}}return{begin:0,end:0}},a.set=function(a,b){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}},a}),c("../lib/boe/src/boe/Function/bind",["../util"],function(a){var b=a.g.Function.prototype;return b.bind||a.bind}),c("Chuanr",["./Formatter","./Pattern","./util","./caret","../lib/boe/src/boe/Function/bind"],function(a,b,c,d,e){function f(a){(0==c.isAcceptableKeyCode(a.keyCode)||c.isModifier(a))&&(0==c.isMovementKeyCode(a.keyCode)&&0==c.isModifier(a)&&a.preventDefault(),this._requireHandlePress=!1,this._requireHandleInput=!1),this._keyCode=a.keyCode,this._caret=d.get(this._el),this._charCode=null,0==c.isDelKey(a.keyCode)&&0==c.isBackSpaceKey(a.keyCode)&&(this._requireHandlePress=!0),this._requireHandleInput=!0}function g(a){0!=this._requireHandlePress&&(this._charCode=a.keyChar||a.keyCode,this._requireHandlePress=!1)}function h(){0!=this._requireHandleInput&&(i.call(this,{key:this._keyCode,"char":this._charCode,del:c.isDelKey(this._keyCode),back:c.isBackSpaceKey(this._keyCode),caret:this._caret}),this._requireHandlePress=!1,this._requireHandleInput=!1)}function i(a){this.formatter.input(a);var b=this.formatter.output();null==b&&(b=this._untouched),this._untouched=b,console.log(b)}function j(){this.patterns=[],this.formatter=null,this._el=null,this._requireHandlePress=!1,this._requireHandleInput=!1,this._keyCode=null,this._charCode=null,this._caret=null,this._untouched="",this.isFormatted=!1}var k={Formatter:a,Pattern:b},l=j.prototype;return l.roast=function(a,b){null!=this._el,this._el=a;for(var d=0;d<b.length;d++)this.patterns.push(k.Pattern.parse(b[d]));this.formatter=new k.Formatter(this.patterns),c.addListener(a,"keydown",e.call(f,this)),c.addListener(a,"keypress",e.call(g,this)),c.addListener(a,"input",e.call(h,this))},j.setting=k,j}),e(function(){return b("chuanr")})}();